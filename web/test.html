<html>

<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>

	<script>
		var bob;
		$.ajax({
		    type : 'POST',
		    url : 'http://eaganr.com:3000',           
		    data: {
			gameID : "0041400406"
		    },
		    success:function (data) {
			bob = data;    
			console.log(data);
			var w=960,
			  
			h=300,
			radius= Math.min(w, h) / 2;

		      var color = d3.scale.ordinal()
			.range(["#ff0000", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ffaaaa"]);
		      var arc = d3.svg.arc()
			.outerRadius(radius -10)
			.innerRadius(0)

		      var pie = d3.layout.pie()
			.sort(null)
			.value(function(d) { return d.points; });

		      var svg = d3.select("#cavs").append("svg")
			.attr("width", w)
			.attr("height", h)
			.append("g")
			.attr("transform", "translate(" + w /2 + "," + h / 2 + ")");

		      var cavsPlayers = [];
		      var warPlayers = [];
		      for(var i=0;i<data.playerStats.length;i++) {
			var player = data.playerStats[i];
			if(player.teamAbbreviation == "GSW" && player.pTS > 0) {
				warPlayers.push({player:player.playerName, points:player.pTS});
			}
			if(player.teamAbbreviation == "CLE"  && player.pTS > 0) {
				cavsPlayers.push({player:player.playerName, points:player.pTS});
			}
		      }
		      console.log(cavsPlayers);
		      console.log(warPlayers);

		      var g = svg.selectAll(".arc")
			.data(pie(cavsPlayers))
			.enter().append("g")
				.attr("class", "arc");

		      g.append("path")
			.attr("d", arc)
			.style("fill", function(d) { return color(d.data.points); });

		      g.append("text")
			.attr("transform", function(d) { return "translate(" + arc.centroid(d) + ")"; })
			.attr("dy", ".35em")
			.style("text-anchor", "middle")
			.style("font-size", "10px")
			.style("z-index", "100")
			.text(function(d) { return d.data.player + " - " + d.data.points; });


			}

		    });

	</script>


</head>

<body>



 <div id="cavs"></div>



</body>

</html
